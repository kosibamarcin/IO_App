{% extends "base.html" %} {% block title %}Ranking{% endblock %}

{% block content %}
<br />
<h1 align="center">Ranking</h1>
<br />
<table class="table table-striped table-bordered">
  <thead class="thead-dark">
    <tr>
      <th scope="col">User</th>
      <th scope="col">Total Duration</th>
      <th scope="col">Average</th>
    </tr>
  </thead>
  <tbody>
  {% for users in userss -%}
      <tr>
          <th scope="row">{{users.first_name}}</th>
            {% set duration = [0] -%}
            {% set amount = [0] -%}
            {% for note in users.notes -%}
                {% if duration.append(duration.pop() + note.time | int) -%}{% endif %}
                {% if amount.append(amount.pop() + 1) -%}{% endif %}
            {% endfor %}
            <td>{{ duration[0] }}</td>
            <td>{{ duration[0] }}</td>
      </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}